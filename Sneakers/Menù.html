<!DOCTYPE html>
<html> 
    <head> 
        <link rel="stylesheet" href="StyleProgetto.css">
    </head>

    
    <script> 
 document.addEventListener("DOMContentLoaded", function () {
    let sneakers = localStorage.getItem("sneakers");
    sneakers = JSON.parse(sneakers);
    console.log(sneakers);

    //collegamento al div di griglia tramite la sua classe
    const griglia = document.getElementsByClassName("product-griglia")[0];

    //for each che cicla la lista, in questo caso iProdotto è come se rappresentasse gli indici stessi delle scarpe (prima AF1 poi Asics etc.)
    for (let iProdotto in sneakers) {
    const prodotto = sneakers[iProdotto][0];

    //creazione carta prodotto e assegnazione class CSS
    const card = document.createElement("div");
    card.className = "product-card";

    // Creazione immagine, e link con appensione del link all'immagine, il link inesistente viene utilizzato per questioni di formattazione
    const link = document.createElement("a");
    link.href = ``;

    const img = document.createElement("img");
    img.src = prodotto.image;
    link.appendChild(img);

    // Crea titolo, prezzo e bottone
    const titolo = document.createElement("h3");
    titolo.textContent = iProdotto;

    const prezzo = document.createElement("p");
    prezzo.textContent = `Prezzo: €${prodotto.prezzo}`;

    const bottone = document.createElement("button");
    bottone.textContent = "Vai al prodotto";

    // addEventListener tiene il bottone in ascolto di un click e fa la funzione all'interno del listener
    bottone.addEventListener("click", function () {
        let prodotto= titolo.textContent; //ottieni nome prodotto scelto
        localStorage.setItem("prodotto", prodotto);
        window.location.href= "Prodotto.html"
    });

    // Composizione finale della card
    card.appendChild(titolo);
    card.appendChild(link);
    card.appendChild(prezzo);
    card.appendChild(bottone);
    griglia.appendChild(card);
}
 })
</script>
    <body> 
        <header>
           <h1>SneakPlug</h1> 
           <a href="window.location.href='carrello.html'"> <img src="carrello.png" width="125px" height="125px"> </a>
        </header>
        <div class="contenuto">
        <div class="product-griglia">
            
                 
        </div>
    </div>

        <footer>
            <h1>Chi Siamo?</h1>
            <p>Benvenuti nella nostra vetrina di sneakers e non solo! Siamo due ragazzi appassionati di sneakers e scarpe in generale, non perderti
                le nostre offerte sul footwear del momento!
            </p>
        </footer>
    </body>
        

</html>
